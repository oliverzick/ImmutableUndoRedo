{"name":"ImmutableUndoredo","tagline":"A lightweight, flexible and easy to use do/undo/redo implementation based on immutable objects for .NET.","body":"# ImmutableUndoRedo\r\nA lightweight, flexible and easy to use do/undo/redo implementation based on immutable objects for .NET.\r\n\r\n# Getting started\r\nTo install ImmutableUndoRedo run the following command from the [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console):\r\n\r\n    PM> install-package ImmutableUndoRedo\r\n\r\n# Sample\r\n## Event implementation\r\n\r\n    struct Event : IEvent\r\n    {\r\n        private readonly int id;\r\n\r\n        private readonly int doCalls;\r\n\r\n        private readonly int undoCalls;\r\n\r\n        public Event(int id)\r\n            : this()\r\n        {\r\n            this.id = id;\r\n        }\r\n\r\n        private Event(int id, int doCalls, int undoCalls)\r\n            : this(id)\r\n        {\r\n            this.doCalls = doCalls;\r\n            this.undoCalls = undoCalls;\r\n        }\r\n\r\n        public IEvent Do()\r\n        {\r\n            Console.WriteLine(\"Do event #{0}\", this.id);\r\n\r\n            return new Event(this.id, this.doCalls + 1, this.undoCalls);\r\n        }\r\n\r\n        public IEvent Undo()\r\n        {\r\n            Console.WriteLine(\"Undo event #{0}\", this.id);\r\n\r\n            return new Event(this.id, this.doCalls, this.undoCalls + 1);\r\n        }\r\n\r\n        public override string ToString()\r\n        {\r\n            return $\"Event {{Id = {this.id}, #Do calls = {this.doCalls}, #Undo calls = {this.undoCalls}}}\";\r\n        }\r\n    }\r\n\r\n## Use of the History class\r\n\r\n    class Program\r\n    {\r\n        static void Main(string[] args)\r\n        {\r\n            var history = History.Create()\r\n                                 .Do(new Event(1))\r\n                                 .Do(new Event(2))\r\n                                 .Do(new Event(3))\r\n                                 .Do(new Event(4))\r\n                                 .Do(new Event(5))\r\n                                 .Undo()\r\n                                 .Undo()\r\n                                 .Undo()\r\n                                 .Redo();\r\n\r\n            Console.WriteLine(\"\\n\\nDone events:\");\r\n            List<IEvent> doneEvents = new List<IEvent>();\r\n            history.CopyDoneTo(doneEvents);\r\n            doneEvents.ForEach(Console.WriteLine);\r\n\r\n            Console.WriteLine(\"\\n\\nUndone events:\");\r\n            List<IEvent> undoneEvents = new List<IEvent>();\r\n            history.CopyUndoneTo(undoneEvents);\r\n            undoneEvents.ForEach(Console.WriteLine);\r\n\r\n            Console.ReadLine();\r\n        }\r\n    }\r\n\r\n    // Console output:\r\n    Do event #1\r\n    Do event #2\r\n    Do event #3\r\n    Do event #4\r\n    Do event #5\r\n    Undo event #5\r\n    Undo event #4\r\n    Undo event #3\r\n    Do event #3\r\n\r\n\r\n    Done events:\r\n    Event {Id = 1, #Do calls = 1, #Undo calls = 0}\r\n    Event {Id = 2, #Do calls = 1, #Undo calls = 0}\r\n    Event {Id = 3, #Do calls = 2, #Undo calls = 1}\r\n\r\n\r\n    Undone events:\r\n    Event {Id = 5, #Do calls = 1, #Undo calls = 1}\r\n    Event {Id = 4, #Do calls = 1, #Undo calls = 1}","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}